{"version":3,"sources":["uni_modules/lime-audio-player/utssdk/app-android/index.uts","uni_modules/lime-audio-player/utssdk/interface.uts","uni_modules/lime-audio-player/utssdk/unierror.uts"],"sourcesContent":["import Context from \"android.content.Context\";\nimport MediaPlayer from \"android.media.MediaPlayer\";\nimport ConnectivityManager from \"android.net.ConnectivityManager\"\nimport Build from \"android.os.Build\"\nimport NetworkCapabilities from \"android.net.NetworkCapabilities\"\nimport PlaybackParams from \"android.media.PlaybackParams\";\nimport AudioManager from \"android.media.AudioManager\";\nimport AudioAttributes from \"android.media.AudioAttributes\";\n\nimport {\n\tInnerAudioContext,\n\tInnerAudioContextOnErrorListenerResult,\n\tOnCanplayCallback,\n\tOnEndedCallback,\n\tInnerAudioContextOnErrorCallback,\n\tOnPauseCallback,\n\tOnPlayCallback,\n\tOnSeekedCallback,\n\tOnSeekingCallback,\n\tInnerAudioContextOnStopCallback,\n\tOnTimeUpdateCallback,\n\tOnWaitingCallback\n} from '../interface'\nimport { InnerAudioContextOnErrorListenerResultImpl, GeneralCallbackResultImpl } from '../unierror'\n//\nclass InnerAudioContextImpl implements InnerAudioContext {\n\t@Volatile\n\tprivate mediaPlayer ?: MediaPlayer | null = null\n\tprivate _src : string = ''\n\tautoplay : boolean = false\n\tprivate _buffered : number = 0\n\tprivate _currentTime : number = 0\n\tprivate _duration : number = 0\n\tprivate _paused : boolean = false\n\tprivate _loop : boolean = false\n\tobeyMuteSwitch : boolean = true\n\tprivate _playbackRate : number = 1\n\treferrerPolicy : string = ''\n\tstartTime : number = 0\n\tprivate _volume : number = 1\n\tprivate _timer : number = -1\n\tprivate _isPrepared : boolean = false\n\tprivate OnCanplayCallbackArray : OnCanplayCallback[] = []\n\tprivate OnEndedCallbackArray : OnEndedCallback[] = []\n\tprivate InnerAudioContextOnStopCallbackArray : InnerAudioContextOnStopCallback[] = []\n\tprivate InnerAudioContextOnErrorCallbackArray : InnerAudioContextOnErrorCallback[] = []\n\tprivate OnPauseCallbackArray : OnPauseCallback[] = []\n\tprivate OnPlayCallbackArray : OnPlayCallback[] = []\n\tprivate OnSeekedCallbackArray : OnSeekedCallback[] = []\n\tprivate OnSeekingCallbackArray : OnSeekingCallback[] = []\n\tprivate OnTimeUpdateCallbackArray : OnTimeUpdateCallback[] = []\n\tprivate OnWaitingCallbackArray : OnWaitingCallback[] = []\n\tconstructor() {\n\t\tthis.mediaPlayer = new MediaPlayer()\n\t\t// 监听结束 OnWaiting\n\t\tthis.mediaPlayer?.setOnBufferingUpdateListener((_ : MediaPlayer, percent : Int) => {\n\t\t\tthis._buffered = Number.from(percent)\n\t\t\tconst res = new GeneralCallbackResultImpl('缓冲中：' + percent.toString())\n\t\t\tthis.OnWaitingCallbackArray.forEach(listener => {\n\t\t\t\tlistener(res)\n\t\t\t})\n\t\t})\n\t\t// 加载完成\n\t\tthis.mediaPlayer?.setOnPreparedListener((_ : MediaPlayer) => {\n\t\t\tthis._isPrepared = true\n\t\t\tif (this.autoplay && this.paused) {\n\t\t\t\tthis.play()\n\t\t\t}\n\t\t\tconst res = new GeneralCallbackResultImpl('ok')\n\t\t\tthis.OnCanplayCallbackArray.forEach(listener => {\n\t\t\t\tlistener(res)\n\t\t\t})\n\t\t})\n\t\t// 监听结束 onEnded\n\t\tthis.mediaPlayer?.setOnCompletionListener((_ : MediaPlayer) => {\n\t\t\tclearTimeout(this._timer)\n\t\t\tconst res = new GeneralCallbackResultImpl('播放完毕')\n\t\t\tthis.OnEndedCallbackArray.forEach(listener => {\n\t\t\t\tlistener(res)\n\t\t\t})\n\t\t})\n\t\t// 监听错误 onError\n\t\tthis.mediaPlayer?.setOnErrorListener((_ : MediaPlayer, what : Int, extra : Int) : boolean => {\n\t\t\t// const result = {\n\t\t\t// \terrCode: Number.from(what),\n\t\t\t// \terrMsg: '播放错误'\n\t\t\t// } as InnerAudioContextOnErrorListenerResult;\n\t\t\tlet result : InnerAudioContextOnErrorListenerResult | null\n\t\t\tif (!this.isNetworkError()) {\n\t\t\t\tresult = new InnerAudioContextOnErrorListenerResultImpl(10002)\n\t\t\t\t// result.errCode = 10002\n\t\t\t\t// result.errMsg = '网络错误'\n\t\t\t} else if (MediaPlayer.MEDIA_ERROR_IO == what) {\n\t\t\t\tresult = new InnerAudioContextOnErrorListenerResultImpl(10003)\n\t\t\t\t// result.errCode = 10003 \n\t\t\t\t// result.errMsg = '文件错误'\n\t\t\t} else if (MediaPlayer.MEDIA_ERROR_MALFORMED == extra) {\n\t\t\t\t// result.errCode = 10004 \n\t\t\t\t// result.errMsg = '格式错误'\n\t\t\t\tresult = new InnerAudioContextOnErrorListenerResultImpl(10004)\n\t\t\t} else {\n\t\t\t\tresult = new InnerAudioContextOnErrorListenerResultImpl(-1)\n\t\t\t\t// result.errCode = -1\n\t\t\t\t// result.errMsg = '未知错误,也许文件不存在'\n\t\t\t}\n\t\t\tthis.InnerAudioContextOnErrorCallbackArray.forEach(listener => {\n\t\t\t\tlistener(result)\n\t\t\t})\n\t\t\treturn true\n\t\t})\n\t\t// 监听跳转 OnSeek\n\t\tthis.mediaPlayer?.setOnSeekCompleteListener((_ : MediaPlayer) => {\n\t\t\tconst res = new GeneralCallbackResultImpl('跳转完毕')\n\t\t\tthis.OnSeekedCallbackArray.forEach(listener => {\n\t\t\t\tlistener(res)\n\t\t\t})\n\n\t\t\tif (!this.paused) {\n\t\t\t\tclearTimeout(this._timer)\n\t\t\t\tthis.updatePlaybackProgress()\n\t\t\t}\n\t\t})\n\t}\n\tprivate updatePlaybackProgress() {\n\t\tif (this.mediaPlayer == null && this.paused && this.OnTimeUpdateCallbackArray.length > 0) return\n\t\tconst res = new GeneralCallbackResultImpl(`播放进度: ${this.mediaPlayer?.getCurrentPosition()}`)\n\t\tthis.OnTimeUpdateCallbackArray.forEach(listener => {\n\t\t\tlistener(res)\n\t\t})\n\t\tthis._timer = setTimeout(() => {\n\t\t\tthis.updatePlaybackProgress()\n\t\t}, 1000)\n\t}\n\t@Suppress(\"DEPRECATION\")\n\tprivate isNetworkError() : boolean {\n\t\tconst manager = UTSAndroid.getAppContext()!.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager;\n\t\tif (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {\n\t\t\tconst network = manager.activeNetwork\n\t\t\tif (network == null) return false\n\t\t\tconst it = manager.getNetworkCapabilities(network)\n\t\t\tif (it?.hasTransport(NetworkCapabilities.TRANSPORT_WIFI) == true ||\n\t\t\t\tit?.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) == true ||\n\t\t\t\tit?.hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET) == true ||\n\t\t\t\tit?.hasTransport(NetworkCapabilities.TRANSPORT_BLUETOOTH) == true ||\n\t\t\t\tit?.hasTransport(NetworkCapabilities.TRANSPORT_VPN) == true\n\t\t\t) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t} else {\n\t\t\treturn manager.activeNetworkInfo?.isConnected == true\n\t\t}\n\t\treturn false\n\t}\n\tset volume(volume : number) {\n\t\tif (volume < 0 || volume > 1) return\n\t\tthis._volume = volume\n\t\tthis.mediaPlayer?.setVolume(volume.toFloat(), volume.toFloat())\n\t}\n\tget volume() : number {\n\t\treturn this._volume\n\t}\n\tget loop() : boolean {\n\t\treturn this.mediaPlayer?.isLooping() ?? this._loop\n\t}\n\tset loop(param0 : boolean) {\n\t\tthis.mediaPlayer?.setLooping(param0)\n\t}\n\tget buffered() : number {\n\t\treturn this._buffered\n\t}\n\tget currentTime() : number {\n\t\treturn (this.mediaPlayer?.getCurrentPosition() ?? this._currentTime) / 1000 // 60\n\t}\n\tset currentTime(s : number) {\n\t\tthis._currentTime = s * 1000 //* 60\n\t\tthis.mediaPlayer?.seekTo(this._currentTime.toInt())\n\t}\n\tget duration() : number {\n\t\treturn (this.mediaPlayer?.getDuration() ?? this._duration) / 1000 // 60\n\t}\n\tget paused() : boolean {\n\t\tif (this.mediaPlayer == null) return this._paused\n\t\treturn !(this.mediaPlayer!.isPlaying())\n\t}\n\tset src(v : string) {\n\t\tthis._src = v\n\t\tif (v.startsWith('/static')) {\n\t\t\tthis._src = UTSAndroid.convert2AbsFullPath(v)\n\t\t}\n\t\ttry {\n\t\t\tclearTimeout(this._timer)\n\t\t\tthis._isPrepared = false;\n\t\t\tthis.mediaPlayer?.stop()\n\t\t\tthis.mediaPlayer?.reset();\n\t\t\tthis.mediaPlayer?.setDataSource(this._src)\n\t\t\tthis.mediaPlayer?.prepareAsync()\n\t\t\t// this.mediaPlayer?.prepare()\n\n\t\t} catch (e) {\n\t\t\tthis.InnerAudioContextOnErrorCallbackArray.forEach(listener => {\n\t\t\t\tlistener(new InnerAudioContextOnErrorListenerResultImpl(10003))\n\t\t\t})\n\t\t}\n\n\t}\n\tget src() : string {\n\t\treturn this._src\n\t}\n\tset playbackRate(speed : number) {\n\t\tif (speed <= 0 || speed > 8 || this.mediaPlayer == null) return\n\t\tif (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n\t\t\tconst params = new PlaybackParams()\n\t\t\tparams.setSpeed(speed.toFloat());\n\t\t\tthis.mediaPlayer!.setPlaybackParams(params)\n\t\t}\n\t}\n\tget playbackRate() : number {\n\t\tconst rate : number | null = this.mediaPlayer?.getPlaybackParams()!.getSpeed()\n\t\treturn rate ?? this._playbackRate\n\t}\n\tdestroy() {\n\t\t// 释放MediaPlayer对象\n\t\tclearTimeout(this._timer)\n\t\tthis.mediaPlayer?.release()\n\t\tthis.mediaPlayer = null\n\t\tthis.OnCanplayCallbackArray = []\n\t\tthis.OnEndedCallbackArray = []\n\t\tthis.InnerAudioContextOnStopCallbackArray = []\n\t\tthis.InnerAudioContextOnErrorCallbackArray = []\n\t\tthis.OnPauseCallbackArray = []\n\t\tthis.OnPlayCallbackArray = []\n\t\tthis.OnSeekedCallbackArray = []\n\t\tthis.OnSeekingCallbackArray = []\n\t\tthis.OnTimeUpdateCallbackArray = []\n\t\tthis.OnWaitingCallbackArray = []\n\t}\n\t\n\toffCanplay() : void\n\toffCanplay(listener ?: OnCanplayCallback) {\n\t\tif (listener == null) {\n\t\t\tthis.OnCanplayCallbackArray = []\n\t\t} else {\n\t\t\tthis.OnCanplayCallbackArray = this.OnCanplayCallbackArray.filter(\n\t\t\t\t(callback) : boolean => callback !== listener\n\t\t\t);\n\t\t}\n\t}\n\toffEnded() : void\n\toffEnded(listener ?: OnEndedCallback) {\n\t\tif (listener == null) {\n\t\t\tthis.OnEndedCallbackArray = []\n\t\t} else {\n\t\t\tthis.OnEndedCallbackArray = this.OnEndedCallbackArray.filter(\n\t\t\t\t(callback) : boolean => callback !== listener\n\t\t\t);\n\t\t}\n\t}\n\toffError() : void\n\toffError(listener ?: InnerAudioContextOnErrorCallback) {\n\t\tif (listener == null) {\n\t\t\tthis.InnerAudioContextOnErrorCallbackArray = []\n\t\t} else {\n\t\t\tthis.InnerAudioContextOnErrorCallbackArray = this.InnerAudioContextOnErrorCallbackArray.filter(\n\t\t\t\t(callback) : boolean => callback !== listener\n\t\t\t);\n\t\t}\n\t}\n\toffPause() : void\n\toffPause(listener ?: OnPauseCallback) {\n\t\tif (listener == null) {\n\t\t\tthis.OnPauseCallbackArray = []\n\t\t} else {\n\t\t\tthis.OnPauseCallbackArray = this.OnPauseCallbackArray.filter(\n\t\t\t\t(callback) : boolean => callback !== listener\n\t\t\t);\n\t\t}\n\t}\n\toffPlay() : void\n\toffPlay(listener ?: OnPlayCallback) {\n\t\tif (listener == null) {\n\t\t\tthis.OnPlayCallbackArray = []\n\t\t} else {\n\t\t\tthis.OnPlayCallbackArray = this.OnPlayCallbackArray.filter(\n\t\t\t\t(callback) : boolean => callback !== listener\n\t\t\t);\n\t\t}\n\t}\n\toffSeeked() : void\n\toffSeeked(listener ?: OnSeekedCallback) {\n\t\tif (listener == null) {\n\t\t\tthis.OnSeekedCallbackArray = []\n\t\t} else {\n\t\t\tthis.OnSeekedCallbackArray = this.OnSeekedCallbackArray.filter(\n\t\t\t\t(callback) : boolean => callback !== listener\n\t\t\t);\n\t\t}\n\t}\n\toffSeeking() : void\n\toffSeeking(listener ?: OnSeekingCallback) {\n\t\tif (listener == null) {\n\t\t\tthis.OnSeekingCallbackArray = []\n\t\t} else {\n\t\t\tthis.OnSeekingCallbackArray = this.OnSeekingCallbackArray.filter(\n\t\t\t\t(callback) : boolean => callback !== listener\n\t\t\t);\n\t\t}\n\t}\n\toffStop() : void\n\toffStop(listener ?: InnerAudioContextOnStopCallback) {\n\t\tif (listener == null) {\n\t\t\tthis.InnerAudioContextOnStopCallbackArray = []\n\t\t} else {\n\t\t\tthis.InnerAudioContextOnStopCallbackArray = this.InnerAudioContextOnStopCallbackArray.filter(\n\t\t\t\t(callback) : boolean => callback !== listener\n\t\t\t);\n\t\t}\n\t}\n\toffTimeUpdate() : void\n\toffTimeUpdate(listener ?: OnTimeUpdateCallback) {\n\t\tif (listener == null) {\n\t\t\tthis.OnTimeUpdateCallbackArray = []\n\t\t} else {\n\t\t\tthis.OnTimeUpdateCallbackArray = this.OnTimeUpdateCallbackArray.filter(\n\t\t\t\t(callback) : boolean => callback !== listener\n\t\t\t);\n\t\t}\n\t}\n\toffWaiting() : void\n\toffWaiting(listener ?: OnWaitingCallback) {\n\t\tif (listener == null) {\n\t\t\tthis.OnCanplayCallbackArray = []\n\t\t} else {\n\t\t\tthis.OnCanplayCallbackArray = this.OnCanplayCallbackArray.filter(\n\t\t\t\t(callback) : boolean => callback !== listener\n\t\t\t);\n\t\t}\n\t}\n\tonCanplay(listener : OnCanplayCallback) {\n\t\tthis.OnCanplayCallbackArray.push(listener)\n\t}\n\tonEnded(listener : OnEndedCallback) {\n\t\tthis.OnEndedCallbackArray.push(listener)\n\t}\n\tonError(listener : InnerAudioContextOnErrorCallback) {\n\t\tthis.InnerAudioContextOnErrorCallbackArray.push(listener)\n\t}\n\tonPause(listener : OnPauseCallback) {\n\t\tthis.OnPauseCallbackArray.push(listener)\n\t\tclearTimeout(this._timer)\n\t}\n\tonPlay(listener : OnPlayCallback) {\n\t\tthis.OnPlayCallbackArray.push(listener)\n\t\tclearTimeout(this._timer)\n\t\tif (this.paused) return\n\t\tthis.updatePlaybackProgress()\n\t}\n\tonSeeked(listener : OnSeekedCallback) {\n\t\tthis.OnSeekedCallbackArray.push(listener)\n\t}\n\tonSeeking(listener : OnSeekingCallback) {\n\t\tthis.OnSeekingCallbackArray.push(listener)\n\t}\n\tonStop(listener : InnerAudioContextOnStopCallback) {\n\t\tthis.InnerAudioContextOnStopCallbackArray.push(listener)\n\t\tclearTimeout(this._timer)\n\t}\n\tonTimeUpdate(listener : OnTimeUpdateCallback) {\n\t\tthis.OnTimeUpdateCallbackArray.push(listener)\n\t\tclearTimeout(this._timer)\n\t\tif (this.paused) return\n\t\tthis.updatePlaybackProgress()\n\t}\n\tonWaiting(listener : OnWaitingCallback) {\n\t\tthis.OnWaitingCallbackArray.push(listener)\n\t}\n\tpause() {\n\t\tif (this.mediaPlayer == null) return\n\t\tthis.mediaPlayer!.pause()\n\t\tclearTimeout(this._timer)\n\t\tif (this.paused) {\n\t\t\tconst res = new GeneralCallbackResultImpl('暂停')\n\t\t\tthis.OnPauseCallbackArray.forEach(listener => {\n\t\t\t\tlistener(res)\n\t\t\t})\n\t\t}\n\t}\n\tplay() {\n\t\tif (this.mediaPlayer == null) return\n\t\tif (this.paused) {\n\t\t\tthis.mediaPlayer!.start();\n\t\t}\n\t\tif (!this.paused) {\n\t\t\tconst res = new GeneralCallbackResultImpl('播放')\n\t\t\tthis.OnPlayCallbackArray.forEach(listener => {\n\t\t\t\tlistener(res)\n\t\t\t})\n\t\t\tclearTimeout(this._timer)\n\t\t\tthis.updatePlaybackProgress()\n\t\t}\n\t}\n\tseek(position : number) {\n\t\tif (this.mediaPlayer == null) return\n\t\tthis._currentTime = position * 1000// * 60\n\t\tthis.mediaPlayer!.seekTo(this._currentTime.toInt())\n\t\tconst res = new GeneralCallbackResultImpl('跳转中')\n\t\tthis.OnSeekingCallbackArray.forEach(listener => {\n\t\t\tlistener(res)\n\t\t})\n\t}\n\tstop() {\n\t\tif (this.mediaPlayer == null) return\n\t\tthis.mediaPlayer!.stop()\n\t\tclearTimeout(this._timer)\n\t\tif (this.paused) {\n\t\t\tconst res = new GeneralCallbackResultImpl('停止')\n\t\t\tthis.InnerAudioContextOnStopCallbackArray.forEach(listener => {\n\t\t\t\tlistener(res)\n\t\t\t})\n\t\t}\n\t}\n\t/**\n\t * 设置音频输出流类型。\n\t * @param outputType 音频输出类型，0 表示扬声器（外放），1 表示听筒。\n\t */\n\tsetAudioOutput(outputType : number) {\n\t\tif(this.mediaPlayer == null) return\n\t\tif (outputType == 0) {\n\t\t\t// this.mediaPlayer!.setAudioStreamType(AudioManager.STREAM_MUSIC);\n\t\t\tconst audioAttributesLoudspeaker = new AudioAttributes.Builder()\n\t\t\t        .setContentType(AudioAttributes.CONTENT_TYPE_MUSIC)\n\t\t\t        .setUsage(AudioAttributes.USAGE_MEDIA)\n\t\t\t        .build();\n\t\t\tthis.mediaPlayer!.setAudioAttributes(audioAttributesLoudspeaker);\n\t\t} else if (outputType == 1) {\n\t\t\tconst audioAttributesLoudspeaker = new AudioAttributes.Builder()\n\t\t\t        .setContentType(AudioAttributes.CONTENT_TYPE_MUSIC)\n\t\t\t        .setUsage(AudioAttributes.USAGE_VOICE_COMMUNICATION)\n\t\t\t        .build();\n\t\t\tthis.mediaPlayer!.setAudioAttributes(audioAttributesLoudspeaker);\n\t\t\t// this.mediaPlayer!.setAudioStreamType(AudioManager.STREAM_VOICE_CALL);\n\t\t} else {\n\t\t\t// Invalid output type. Must be 0 (speaker) or 1 (earpiece).\n\t\t}\n\t}\n}\n\n\nexport function createInnerAudioContext() : InnerAudioContext {\n\treturn new InnerAudioContextImpl()\n}\n","\nexport interface GeneralCallbackResult  {\n\t/** 错误信息 */\n\terrMsg : string\n}\n// export type InnerAudioContextOnErrorListenerResult = {\n// \t/** 可选值：\n// \t * - 10001: 系统错误;\n// \t * - 10002: 网络错误;\n// \t * - 10003: 文件错误;\n// \t * - 10004: 格式错误;\n// \t * - -1: 未知错误; */\n// \terrCode : 10001 | 10002 | 10003 | 10004 | -1\n// \terrMsg : string\n// }\nexport type ErrorCode = 10001 | 10002 | 10003 | 10004 | -1\nexport interface InnerAudioContextOnErrorListenerResult {\n\terrCode: number\n\terrMsg : string\n}\n/**\n * 公共回调\n */\nexport type OnCommonCallback = () => void\n\n// type Callback = (res : GeneralCallbackResult) => void\ntype Callback = (res:any) => void\n/** onCanplay 传入的监听函数。不传此参数则移除所有监听函数。 */\nexport type OffCanplayCallback = (res : GeneralCallbackResult) => void\n/** onEnded 传入的监听函数。不传此参数则移除所有监听函数。 */\nexport type OffEndedCallback = (res : GeneralCallbackResult) => void\n/** onError 传入的监听函数。不传此参数则移除所有监听函数。 */\nexport type InnerAudioContextOffErrorCallback = (\n\tresult : InnerAudioContextOnErrorListenerResult\n) => void\n/** onPause 传入的监听函数。不传此参数则移除所有监听函数。 */\nexport type OffPauseCallback = (res : GeneralCallbackResult) => void\n/** onPlay 传入的监听函数。不传此参数则移除所有监听函数。 */\nexport type OffPlayCallback = (res : GeneralCallbackResult) => void\n/** onSeeked 传入的监听函数。不传此参数则移除所有监听函数。 */\nexport type OffSeekedCallback = (res : GeneralCallbackResult) => void\n/** onSeeking 传入的监听函数。不传此参数则移除所有监听函数。 */\nexport type OffSeekingCallback = (res : GeneralCallbackResult) => void\n/** onStop 传入的监听函数。不传此参数则移除所有监听函数。 */\nexport type OffStopCallback = (res : GeneralCallbackResult) => void\n/** onTimeUpdate 传入的监听函数。不传此参数则移除所有监听函数。 */\nexport type OffTimeUpdateCallback = (res : GeneralCallbackResult) => void\n/** onWaiting 传入的监听函数。不传此参数则移除所有监听函数。 */\nexport type OffWaitingCallback = (res : GeneralCallbackResult) => void\nexport type OnCanplayCallback = (res : GeneralCallbackResult) => void\nexport type OnEndedCallback = (res : GeneralCallbackResult) => void\n/** 音频播放错误事件的监听函数 */\nexport type InnerAudioContextOnErrorCallback = (\n\tresult : InnerAudioContextOnErrorListenerResult\n) => void\n\nexport type OnPauseCallback = (res : GeneralCallbackResult) => void\nexport type OnPlayCallback = (res : GeneralCallbackResult) => void\nexport type OnSeekedCallback = (res : GeneralCallbackResult) => void\nexport type OnSeekingCallback = (res : GeneralCallbackResult) => void\nexport type InnerAudioContextOnStopCallback = (res : GeneralCallbackResult) => void\nexport type OnTimeUpdateCallback = (res : GeneralCallbackResult) => void\n/** 音频加载中事件的监听函数 */\nexport type OnWaitingCallback = (res : GeneralCallbackResult) => void\n\n\n// export interface InnerAudioContext2 {\n// \t/** 是否自动开始播放，默认为 `false` */\n// \tsetAutoplayState(state: boolean):void\n// \tautoplay : boolean\n// \tsetSource(url: string):void\n// \tsrc: string\n// }\nexport interface InnerAudioContext {\n\n\t/** 是否自动开始播放，默认为 `false` */\n\t// setAutoplayState(state: boolean):void\n\n\n\n\tautoplay : boolean\n\t/** 音频缓冲的时间点，仅保证当前播放时间点到此时间点内容已缓冲（只读） */\n\treadonly buffered : number\n\t/** 当前音频的播放位置（单位 s）。只有在当前有合法的 src 时返回，时间保留小数点后 6 位（currentTime 开始可读可写，改变 currentTime 值等同于调用 seek） */\n\tcurrentTime : number\n\t/** 当前音频的长度（单位 s）。只有在当前有合法的 src 时返回（只读） */\n\treadonly duration : number\n\t/** 是否循环播放，默认为 `false` */\n\n\n\n\tloop : boolean\n\t/** 是否遵循系统静音开关，默认为 `true`。当此参数为 `false` 时，即使用户打开了静音开关，也能继续发出声音。\n\t */\n\tobeyMuteSwitch : boolean\n\t/** 当前是是否暂停或停止状态（只读） */\n\treadonly paused : boolean\n\t/**\n\t * 播放速度。范围 0.5-2.0，默认为 1。（Android 需要 6 及以上版本） */\n\n\n\n\tplaybackRate : number\n\t/** \n\t * `origin`: 发送完整的referrer; `no-referrer`: 不发送。格式固定为 `https://servicewechat.com/{appid}/{version}/page-frame.html`，其中 {appid} 为小程序的 appid，{version} 为小程序的版本号，版本号为 0 表示为开发版、体验版以及审核版本，版本号为 devtools 表示为开发者工具，其余为正式版本； */\n\treferrerPolicy : string\n\t/** 音频资源的地址，用于直接播放 */\n\n\n\n\tsrc : string\n\t/** 开始播放的位置（单位：s），默认为 0 */\n\n\n\n\tstartTime : number\n\t\n\t/** 需要基础库： `1.9.90`\n\t *\n\t * 音量。范围 0~1。默认为 1 */\n\n\n\n\tvolume : number\n\t/** \n\t * 销毁当前实例 */\n\tdestroy() : void\n\t/**\n* 移除音频进入可以播放状态的事件的监听函数\n*\n* **示例代码**\n*\n* ```js\nconst listener = function (res) { console.log(res) }\n\nInnerAudioContext.onCanplay(listener)\nInnerAudioContext.offCanplay(listener) // 需传入与监听时同一个的函数对象\n``` */\n\toffCanplay() : void\n\toffCanplay(\n\t\t/** onCanplay 传入的监听函数。不传此参数则移除所有监听函数。 */\n\t\tlistener ?: OffCanplayCallback\n\t) : void\n\t/** \n* 移除音频自然播放至结束的事件的监听函数\n*\n* **示例代码**\n*\n* ```js\nconst listener = function (res) { console.log(res) }\n\nInnerAudioContext.onEnded(listener)\nInnerAudioContext.offEnded(listener) // 需传入与监听时同一个的函数对象\n``` */\n\toffEnded() : void\n\toffEnded(\n\t\t/** onEnded 传入的监听函数。不传此参数则移除所有监听函数。 */\n\t\tlistener ?: OffEndedCallback\n\t) : void\n\t/**\n* 移除音频播放错误事件的监听函数\n*\n* **示例代码**\n*\n* ```js\nconst listener = function (res) { console.log(res) }\n\nInnerAudioContext.onError(listener)\nInnerAudioContext.offError(listener) // 需传入与监听时同一个的函数对象\n``` */\n\toffError() : void\n\toffError(\n\t\t/** onError 传入的监听函数。不传此参数则移除所有监听函数。 */\n\t\tlistener ?: InnerAudioContextOffErrorCallback\n\t) : void\n\t/** \n* 移除音频暂停事件的监听函数\n*\n* **示例代码**\n*\n* ```js\nconst listener = function (res) { console.log(res) }\n\nInnerAudioContext.onPause(listener)\nInnerAudioContext.offPause(listener) // 需传入与监听时同一个的函数对象\n``` */\n\toffPause() : void\n\toffPause(\n\t\t/** onPause 传入的监听函数。不传此参数则移除所有监听函数。 */\n\t\tlistener ?: OffPauseCallback\n\t) : void\n\t/** \n* 移除音频播放事件的监听函数\n*\n* **示例代码**\n*\n* ```js\nconst listener = function (res) { console.log(res) }\n\nInnerAudioContext.onPlay(listener)\nInnerAudioContext.offPlay(listener) // 需传入与监听时同一个的函数对象\n``` */\n\toffPlay() : void\n\toffPlay(\n\t\t/** onPlay 传入的监听函数。不传此参数则移除所有监听函数。 */\n\t\tlistener ?: OffPlayCallback\n\t) : void\n\t/**\n* 移除音频完成跳转操作的事件的监听函数\n*\n* **示例代码**\n*\n* ```js\nconst listener = function (res) { console.log(res) }\n\nInnerAudioContext.onSeeked(listener)\nInnerAudioContext.offSeeked(listener) // 需传入与监听时同一个的函数对象\n``` */\n\toffSeeked() : void\n\toffSeeked(\n\t\t/** onSeeked 传入的监听函数。不传此参数则移除所有监听函数。 */\n\t\tlistener ?: OffSeekedCallback\n\t) : void\n\t/**\n* 移除音频进行跳转操作的事件的监听函数\n*\n* **示例代码**\n*\n* ```js\nconst listener = function (res) { console.log(res) }\n\nInnerAudioContext.onSeeking(listener)\nInnerAudioContext.offSeeking(listener) // 需传入与监听时同一个的函数对象\n``` */\n\toffSeeking() : void\n\toffSeeking(\n\t\t/** onSeeking 传入的监听函数。不传此参数则移除所有监听函数。 */\n\t\tlistener ?: OffSeekingCallback\n\t) : void\n\t/**\n* 移除音频停止事件的监听函数\n*\n* **示例代码**\n*\n* ```js\nconst listener = function (res) { console.log(res) }\n\nInnerAudioContext.onStop(listener)\nInnerAudioContext.offStop(listener) // 需传入与监听时同一个的函数对象\n``` */\n\toffStop() : void\n\toffStop(\n\t\t/** onStop 传入的监听函数。不传此参数则移除所有监听函数。 */\n\t\tlistener ?: OffStopCallback\n\t) : void\n\t/** \n* 移除音频播放进度更新事件的监听函数\n*\n* **示例代码**\n*\n* ```js\nconst listener = function (res) { console.log(res) }\n\nInnerAudioContext.onTimeUpdate(listener)\nInnerAudioContext.offTimeUpdate(listener) // 需传入与监听时同一个的函数对象\n``` */\n\toffTimeUpdate() : void\n\toffTimeUpdate(\n\t\t/** onTimeUpdate 传入的监听函数。不传此参数则移除所有监听函数。 */\n\t\tlistener ?: OffTimeUpdateCallback\n\t) : void\n\t/**\n* 移除音频加载中事件的监听函数\n*\n* **示例代码**\n*\n* ```js\nconst listener = function (res) { console.log(res) }\n\nInnerAudioContext.onWaiting(listener)\nInnerAudioContext.offWaiting(listener) // 需传入与监听时同一个的函数对象\n``` */\n\toffWaiting() : void\n\toffWaiting(\n\t\t/** onWaiting 传入的监听函数。不传此参数则移除所有监听函数。 */\n\t\tlistener ?: OffWaitingCallback\n\t) : void\n\t/**\n\t * 监听音频进入可以播放状态的事件。但不保证后面可以流畅播放 */\n\tonCanplay(\n\t\t/** 音频进入可以播放状态的事件的监听函数 */\n\t\tlistener : OnCanplayCallback\n\t) : void\n\t/**\n\t * 监听音频自然播放至结束的事件 */\n\tonEnded(\n\t\t/** 音频自然播放至结束的事件的监听函数 */\n\t\tlistener : OnEndedCallback\n\t) : void\n\t/**\n\t * 监听音频播放错误事件\n\t *\n\t * **Tips**\n\t *\n\t * 1. errCode=100001 时，如若 errMsg 中有 INNERCODE -11828 ，请先检查 response header 是否缺少 Content-Length\n\t * 2. errCode=100001 时，如若 errMsg 中有 systemErrCode:200333420，请检查文件编码格式和 fileExtension 是否一致 */\n\tonError(\n\t\t/** 音频播放错误事件的监听函数 */\n\t\tlistener : InnerAudioContextOnErrorCallback\n\t) : void\n\t/** \n\t * 监听音频暂停事件 */\n\tonPause(\n\t\t/** 音频暂停事件的监听函数 */\n\t\tlistener : OnPauseCallback\n\t) : void\n\t/**\n\t * 监听音频播放事件 */\n\tonPlay(\n\t\t/** 音频播放事件的监听函数 */\n\t\tlistener : OnPlayCallback\n\t) : void\n\t/**\n\t * 监听音频完成跳转操作的事件 */\n\tonSeeked(\n\t\t/** 音频完成跳转操作的事件的监听函数 */\n\t\tlistener : OnSeekedCallback\n\t) : void\n\t/** \n\t * 监听音频进行跳转操作的事件 */\n\tonSeeking(\n\t\t/** 音频进行跳转操作的事件的监听函数 */\n\t\tlistener : OnSeekingCallback\n\t) : void\n\t/** \n\t * 在插件中使用：支持\n\t *\n\t * 监听音频停止事件 */\n\tonStop(\n\t\t/** 音频停止事件的监听函数 */\n\t\tlistener : InnerAudioContextOnStopCallback\n\t) : void\n\t/** \n\t * 在插件中使用：支持\n\t *\n\t * 监听音频播放进度更新事件 */\n\tonTimeUpdate(\n\t\t/** 音频播放进度更新事件的监听函数 @escaping */\n\t\tlistener : OnTimeUpdateCallback\n\t) : void\n\t/** \n\t *\n\t * 在插件中使用：支持\n\t *\n\t * 监听音频加载中事件。当音频因为数据不足，需要停下来加载时会触发 */\n\tonWaiting(\n\t\t/** 音频加载中事件的监听函数 */\n\t\tlistener : OnWaitingCallback\n\t) : void\n\t/** \n\t *\n\t * 在插件中使用：支持\n\t *\n\t * 暂停。暂停后的音频再播放会从暂停处开始播放 */\n\tpause() : void\n\t/** \n\t * 在插件中使用：支持\n\t *\n\t * 播放 */\n\tplay() : void\n\t/** \n\t *\n\t * 在插件中使用：支持\n\t *\n\t * 跳转到指定位置 */\n\tseek(\n\t\t/** 跳转的时间，单位 s。精确到小数点后 3 位，即支持 ms 级别精确度 */\n\t\tposition : number\n\t) : void\n\t/** \n\t *\n\t * 在插件中使用：支持\n\t *\n\t * 停止。停止后的音频再播放会从头开始播放。 */\n\tstop() : void\n\t/**\n\t * 设置音频输出流类型。\n\t * @param outputType 音频输出类型，0 表示扬声器（外放），1 表示听筒。\n\t */\n\tsetAudioOutput(outputType : number):void\n}\n","/* 此规范为 uni 规范，可以按照自己的需要选择是否实现 */\nimport { ErrorCode, InnerAudioContextOnErrorListenerResult, GeneralCallbackResult } from \"./interface.uts\"\n/**\n * 错误主题\n * 注意：错误主题一般为插件名称，每个组件不同，需要使用时请更改。\n * [可选实现]\n */\nexport const UniErrorSubject = 'lime-audio-manager';\n\n\n/**\n * 错误信息\n * @UniError\n * [可选实现]\n */\nexport const errorCodes : Map<ErrorCode, string> = new Map([\n  /**\n   * 错误码及对应的错误信息\n   */\n  [10001, '系统错误'],\n  [10002, '网络错误'],\n  [10003, '文件错误'],\n  [10004, '格式错误'],\n  [-1, '未知错误']\n]);\n\n\n/**\n * 错误对象实现\n */\nexport class InnerAudioContextOnErrorListenerResultImpl extends UniError implements InnerAudioContextOnErrorListenerResult {\n  /**\n   * 错误对象构造函数\n   */\n  constructor(errCode : ErrorCode, errMsg: string|null = null) {\n    super();\n    this.errSubject = UniErrorSubject;\n    this.errCode = errCode;\n    this.errMsg = errMsg ?? errorCodes.get(errCode) ?? \"\";\n  }\n}\n\nexport class GeneralCallbackResultImpl implements GeneralCallbackResult {\n\terrMsg : string\n\tconstructor(errMsg: string) {\n\t\tthis.errMsg = errMsg\n\t}\n}\n"],"names":[],"mappings":"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"}